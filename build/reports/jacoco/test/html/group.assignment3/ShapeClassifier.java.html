<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>ShapeClassifier.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">assignment3</a> &gt; <a href="index.source.html" class="el_package">group.assignment3</a> &gt; <span class="el_source">ShapeClassifier.java</span></div><h1>ShapeClassifier.java</h1><pre class="source lang-java linenums">package group.assignment3;

public class ShapeClassifier {
	private int badGuesses; 
<span class="fc" id="L5">	private String[] threeParamGuesses = {&quot;Equilateral&quot;, &quot;Isosceles&quot;, &quot;Scalene&quot;};</span>
<span class="fc" id="L6">	private String[] fourParamGuesses = {&quot;Rectangle&quot;, &quot;Square&quot;};</span>
<span class="fc" id="L7">	private String[] twoParamGuesses = {&quot;Circle&quot;, &quot;Ellipse&quot;, &quot;Line&quot;};</span>

<span class="fc" id="L9">	public ShapeClassifier() {</span>
<span class="fc" id="L10">		badGuesses = 0;</span>
<span class="fc" id="L11">	}</span>

	// return Yes if the guess is correct, No otherwise
	public String evaluateGuess(String arg) {
		//1
<span class="fc" id="L16">		String shapeGuessResult = &quot;&quot;;</span>
<span class="fc" id="L17">		Integer[] parameters = getParams(arg);</span>
<span class="fc" id="L18">		String shapeGuess = getShapeGuess(arg);</span>
<span class="fc" id="L19">		String sizeGuess = getSizeGuess(arg);</span>
<span class="fc" id="L20">		String evenOddGuess = getEvenOddGuess(arg);</span>
<span class="fc" id="L21">		int calcPerim = 0;</span>
<span class="pc bpc" id="L22" title="1 of 2 branches missed.">		if (shapeGuess == null)//2</span>
<span class="nc" id="L23">			shapeGuess = &quot;&quot;;//3</span>
<span class="pc bpc" id="L24" title="1 of 2 branches missed.">		if (sizeGuess == null)//4</span>
<span class="nc" id="L25">			sizeGuess = &quot;&quot;;//5</span>
<span class="pc bpc" id="L26" title="1 of 2 branches missed.">		if (evenOddGuess == null)//6</span>
<span class="nc" id="L27">			evenOddGuess = &quot;&quot;;//7</span>
<span class="pc bpc" id="L28" title="4 of 5 branches missed.">		switch (parameters.length) {//8</span>
			case 1:
<span class="pc bpc" id="L30" title="1 of 2 branches missed.">				if (shapeGuess.equals(&quot;Line&quot;)) {//9</span>
<span class="fc" id="L31">					shapeGuessResult = shapeGuess;//13</span>
<span class="fc" id="L32">					calcPerim = parameters[0];</span>
				}
				break;
			case 2:
<span class="nc" id="L36">				shapeGuessResult = classify2Parameters(parameters[1], parameters[1]);//10</span>
<span class="nc bnc" id="L37" title="All 2 branches missed.">				if (shapeGuessResult.equals(&quot;Ellipse&quot;)) {//14</span>
<span class="nc" id="L38">					calcPerim = calculateEllipsePerimeter(parameters[0],parameters[1]);//16</span>
				}
				else {
<span class="nc" id="L41">					calcPerim = calculateCirclePerimeter(parameters[0]);//17</span>
				}
<span class="nc" id="L43">				break;</span>
			case 3:
<span class="nc" id="L45">				shapeGuessResult = classify3Parameters(parameters[0], parameters[1],parameters[2]);//11</span>
<span class="nc" id="L46">				calcPerim = calculateTrianglePerimeter(parameters[1], parameters[1],parameters[2]);</span>
<span class="nc" id="L47">				break;</span>
			case 4:
<span class="nc" id="L49">				shapeGuessResult = classify4Parameters(parameters[0], parameters[1],parameters[2], parameters[3]);//12</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">				if (shapeGuessResult.equals(&quot;Rectangle&quot;)) {//15</span>
<span class="nc" id="L51">					calcPerim = calculateRectanglePerimeter(parameters[0], parameters[3],parameters[2], parameters[3]);//18</span>
				}
				else {
<span class="nc" id="L54">					calcPerim = calculateRectanglePerimeter(parameters[0], parameters[1],parameters[2], parameters[3]);//19</span>
				}
		}
<span class="fc" id="L57">		Boolean isShapeGuessCorrect = null;//20</span>
<span class="fc" id="L58">		Boolean isSizeGuessCorrect = null;</span>
<span class="fc" id="L59">		Boolean isEvenOddCorrect = null;</span>
		// check the shape guess
<span class="pc bpc" id="L61" title="1 of 2 branches missed.">		if (shapeGuessResult.equals(shapeGuess))//21</span>
<span class="fc" id="L62">			isShapeGuessCorrect = true;//22</span>
		else
<span class="nc" id="L64">			isShapeGuessCorrect = false;//23</span>
		// check the size guess
<span class="pc bpc" id="L66" title="2 of 4 branches missed.">		if (calcPerim &gt; 200 &amp;&amp; sizeGuess.equals(&quot;Large&quot;)) {//24</span>
<span class="fc" id="L67">			isSizeGuessCorrect = true;//26</span>
		}
<span class="nc bnc" id="L69" title="All 4 branches missed.">		else if (calcPerim &lt; 10 &amp;&amp; sizeGuess.equals(&quot;Small&quot;)) {//25</span>
<span class="nc" id="L70">			isSizeGuessCorrect = true;//26</span>
		}
		else {
<span class="nc" id="L73">			isSizeGuessCorrect = false;//27</span>
		}
<span class="pc bpc" id="L75" title="2 of 4 branches missed.">		if ( 0 == (calcPerim % 2) &amp;&amp; evenOddGuess.equals(&quot;Yes&quot;)) {//28</span>
<span class="fc" id="L76">			isEvenOddCorrect = true;//30</span>
		}
<span class="nc bnc" id="L78" title="All 4 branches missed.">		else if ( 0 != (calcPerim % 2) &amp;&amp; evenOddGuess.equals(&quot;No&quot;)) {//29</span>
<span class="nc" id="L79">			isEvenOddCorrect = true;//30</span>
		}
		else {
<span class="nc" id="L82">			isEvenOddCorrect = false;//31</span>
		}
<span class="pc bpc" id="L84" title="3 of 6 branches missed.">		if (isShapeGuessCorrect &amp;&amp; isSizeGuessCorrect &amp;&amp; isEvenOddCorrect) {//32</span>
<span class="fc" id="L85">			badGuesses=0;</span>
<span class="fc" id="L86">			return &quot;Yes&quot;;//33</span>
		}
		else {
			// too many bad guesses
<span class="nc" id="L90">			badGuesses++;//34</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">			if (badGuesses &gt;= 3) {//35</span>
<span class="nc" id="L92">				System.out.println(&quot;Bad guess limit Exceeded&quot;);</span>
<span class="nc" id="L93">				System.exit(1);//36</span>
			}
<span class="nc" id="L95">			return &quot;No&quot;;//37</span>
		}
	}

	// P = 2 * PI *r
	private int calculateCirclePerimeter(int r) {
<span class="nc" id="L101">		return (int) (2 * Math.PI * r);</span>
	}

	// P = 4 * s
	private int calculateSquarePerimeter(int side) {
<span class="nc" id="L106">		return 4 * side;</span>
	}

	// P = 2l + 2w)
	private int calculateRectanglePerimeter(int side1, int side2, int side3, int side4) {
<span class="nc bnc" id="L111" title="All 2 branches missed.">		if (side1 == side2) {</span>

<span class="nc" id="L113">			return (2 * side1) + (2 * side3);</span>
		} 

<span class="nc bnc" id="L116" title="All 2 branches missed.">		else if (side2 == side3) {</span>
<span class="nc" id="L117">			return (2 * side1) + (2 * side2);</span>
		}

<span class="nc" id="L120">		return 0;</span>
	}

	// P = a + b + c
	private int calculateTrianglePerimeter(int side1, int side2 , int side3) {
<span class="nc" id="L125">		return side1 + side2 + side3;</span>
	}

	// This is an approximation
	// PI(3(a+b) - sqrt((3a+b)(a+3b))
	private int calculateEllipsePerimeter(int a, int b) {
<span class="nc" id="L131">		double da = a, db = b;</span>
<span class="nc" id="L132">		return (int) ((int) Math.PI * (3 * (da+db) - Math.sqrt((3*da+db)*(da+3*db)))); </span>
	}

	// Transform a string argument into an array of numbers
	private Integer[] getParams(String args) {
<span class="fc" id="L137">		String[] params = args.split(&quot;,&quot;);</span>
<span class="fc" id="L138">		Integer[] numParams = null;</span>

<span class="fc" id="L140">		numParams = new Integer[params.length-3];</span>
<span class="fc bfc" id="L141" title="All 2 branches covered.">		for (int i=3; i&lt;params.length; i++) {</span>
<span class="fc" id="L142">			numParams[i-3] = Integer.parseInt(params[i]);</span>
		}
<span class="fc" id="L144">		return numParams;		</span>
	}

	// extract the Even/Odd guess
	private String getEvenOddGuess(String args) {
<span class="fc" id="L149">		String[] params = args.split(&quot;,&quot;);</span>
<span class="fc" id="L150">		return params[2];		</span>
	}

	// extract the size guess
	private String getSizeGuess(String args) {
<span class="fc" id="L155">		String[] params = args.split(&quot;,&quot;);</span>
<span class="fc" id="L156">		return params[1];		</span>
	}

	// extract the shape guess 
	private String getShapeGuess(String args) {
<span class="fc" id="L161">		String[] params = args.split(&quot;,&quot;);</span>
<span class="fc" id="L162">		return params[0];</span>
	}

	// classify an two sides 
	private String classify2Parameters(int a, int b) {
<span class="nc bnc" id="L167" title="All 2 branches missed.">		if (a == b) {</span>
<span class="nc" id="L168">			return twoParamGuesses[0];</span>
		}
<span class="nc bnc" id="L170" title="All 2 branches missed.">		else if (a == 0) {</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">			if (b &gt; 0) {</span>
<span class="nc" id="L172">				return twoParamGuesses[1];</span>
			}
		}
<span class="nc bnc" id="L175" title="All 2 branches missed.">		else if (a &gt; 1) {</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">			if (b != 0) {</span>
<span class="nc" id="L177">				return twoParamGuesses[1]; </span>
			}
		}
<span class="nc" id="L180">		return &quot;&quot;;</span>
	}

	// Classify four sides
	private String classify4Parameters(int a, int b, int c, int d) {
<span class="nc bnc" id="L185" title="All 4 branches missed.">		if (a == b &amp;&amp; c == d) {</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">			if (a != c) {</span>
<span class="nc" id="L187">				return fourParamGuesses[1];</span>
			}
			else 
<span class="nc" id="L190">				return fourParamGuesses[0];</span>
		}		
<span class="nc bnc" id="L192" title="All 4 branches missed.">		else if (b == d &amp;&amp; c == a) {</span>
<span class="nc" id="L193">			return fourParamGuesses[0];</span>
		}
<span class="nc bnc" id="L195" title="All 4 branches missed.">		else if (b == c &amp;&amp; a == d) {</span>
<span class="nc" id="L196">			return fourParamGuesses[0];</span>
		}
<span class="nc" id="L198">		return  &quot;&quot;;</span>
	}

	// Classify a triangle based on the length of its sides
	private String classify3Parameters(int a, int b, int c) {

<span class="nc bnc" id="L204" title="All 6 branches missed.">		if ( (a &lt; (b+c)) &amp;&amp; (b &lt; (a + c)) &amp;&amp; (c &lt; (a+b))) {</span>
<span class="nc bnc" id="L205" title="All 4 branches missed.">			if (a == b &amp;&amp; b == c) {</span>
<span class="nc" id="L206">				return threeParamGuesses[0]; // Equilateral</span>
<span class="nc bnc" id="L207" title="All 6 branches missed.">			} else if (a!=b &amp;&amp; a!=c &amp;&amp; b!=c) {</span>
<span class="nc" id="L208">				return threeParamGuesses[2]; // Scalene</span>
			} else {
<span class="nc" id="L210">				return threeParamGuesses[1]; // Isosceles</span>
			}  
		}
<span class="nc" id="L213">		return &quot;&quot;;</span>
	}
}

</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span></div></body></html>